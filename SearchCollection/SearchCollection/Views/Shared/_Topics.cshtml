@{
    var user = ((SearchCollection.Models.SRUser)Session["SRUser"]);
}

<table class="table table-hover h6">
    <thead>
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Created On</th>
            @if (user != null)
            {
                if (user.Role == SearchCollection.Models.UserRole.ADMIN)
                {
                    <th>User</th>
                }
            }
            <th></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: Topics">
        <tr>
            <td><a data-bind="attr: { href: Url}"><span data-bind="text: Title"></span></a></td>
            <td><span data-bind="text: Description"></span></td>
            <td><span data-bind="text: DateCreatedFormatted"></span></td>
            @if (user != null)
            {
                if (user.Role == SearchCollection.Models.UserRole.ADMIN)
                {
                    <td><span data-bind="text: User"></span></td>
                    <td><input type="button" data-bind="click: $parent.Delete" value="-" class="btn btn-danger btn-sm"></td>
                }
                else
                {
                    <td></td>
                }
            }
            else
            {
                <td></td>
            }
        </tr>
    </tbody>
</table>

<table class="table table-hover">
    <tbody data-bind="foreach: InsertList">
        <tr>
            <td><input placeholder="Title" data-bind="value: Title" class="form-control"></td>
            <td><input placeholder="Description" data-bind="value: Description" class="form-control"></td>
            <td><input placeholder="Link" data-bind="value: Link" class="form-control"></td>
            <td><input type="button" data-bind="click: $parent.RemoveRow" value="-" class="btn btn-danger btn-sm"></td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3">
                @if (user != null)
                {
                    <input type="button" value="+" class="btn btn-warning btn-sm" data-bind="click: AddRow" />
                    <input type="button" value="Save" class="btn btn-success pull-right btn-sm" data-bind="click: Save" />
                }
                else
                {
                    <label class="label-danger h6" style="padding:3px;"><small style="color:white;">Please sign up/ sign in to add new search records.</small></label>
                }
            </td>
        </tr>
    </tfoot>
</table>
